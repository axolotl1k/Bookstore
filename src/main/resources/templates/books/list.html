<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Каталог книг</title>
</head>
<body>

<div th:insert="~{fragments/navbar :: body}"></div>

<h1>Каталог книг</h1>

<form th:action="@{/books}" method="get">
    <div>
        <label>Назва:
            <input type="text" name="title" th:value="${filter.title}" placeholder="будь-яка частина назви"/>
        </label>
    </div>
    <div>
        <label>Автор:
            <input type="text" name="author" th:value="${filter.author}" placeholder="Ім’я автора"/>
        </label>
    </div>
    <div>
        <label>Категорія:
            <select name="category" th:value="${filter.category}">
                <option value="">— всі —</option>
                <option th:each="c: ${categories}"
                        th:value="${c.id}"
                        th:text="${c.name}"
                        th:selected="${c.id.toString() == filter.category}">Категорія</option>
            </select>
        </label>
    </div>
    <div>
        <label>Ціна від:
            <input type="number" step="0.01" name="minPrice" th:value="${filter.minPrice}"/>
        </label>
        <label>до:
            <input type="number" step="0.01" name="maxPrice" th:value="${filter.maxPrice}"/>
        </label>
    </div>
    <button type="submit">Пошук</button>
</form>

<table>
    <thead>
    <tr>
        <th>Назва</th>
        <th>Автор</th>
        <th>Категорія</th>
        <th>Ціна</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
        <td>
            <a th:href="@{|/books/${book.id}|}"
               th:text="${book.title}">Назва книги</a>
        </td>
        <td th:text="${book.author}">Автор</td>
        <td th:text="${book.category}">Категорія</td>
        <td th:text="${book.price}">Ціна</td>
    </tr>
    <tr th:if="${#lists.isEmpty(books)}">
        <td colspan="3">Нічого не знайдено</td>
    </tr>
    </tbody>
</table>
</body>
</html>
